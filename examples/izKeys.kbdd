[]
ExtraScanCodesWin=
COMPANYNAME=Ilya Zakharevich
+LAYOUTNAME=US-Intl Shift-Space -> Russian phonetic, k.ilyaz.org/iz
+LAYOUTNAME=Russian phonetic Shift-Space -> US-Intl, k.ilyaz.org/iz
COPYR_YEARS=2011,2012
@LOCALE_NAME=en-US,ru-RU
@LOCALE_ID=0409,0419
@DLLNAME=iz-la-ru,iz-ru-la
SORT_ORDER_ID_=0000
@LANGUAGE_NAME=English (United States),Russian (Russia)
#
VERSION=0.01
#
[Substitutions]
# Will be used when putting a second diacritic: (as <subst-Vietnamese>)
@Vietnamese=åă,àâ,èê,òô,øơ,bư
@Macron=øō
@Zuang_tones=2ƨ,3з,4ч,5ƽ,6ƅ,@Ƨ,#З,$Ч,%Ƽ,^Ƅ
#
[DEADKEYS]
#
# Can be omitted now
#
0020=SPACE
#
[visual -> KBD/B/C/D]
#
visual_rowcount=4
@visual_per_row_counts=4,4,4,4
visual_prefixes=  *
in_key_separator=/
prefix_repeat=3
#					Greek-AltGr and CopyRight-AltGr each has only one element: Ω and ©
@layer_names=Blue,Blue-AltGr,Greek,Greek-AltGr
@layer_names=Green,Green-AltGr,Cyrillic-Extra,Cyrillic-ExtraExtra
@layer_names=US-Base,USLatin-AltGr,Junk,Junk-AltGr
@layer_names=Russian-Base,Cyrillic-AltGr,Cyrillic-II,Cyrillic-II-AltGr
#					20: access KP_Decimal and KP_Extra_Slash_on_Left on offsets 20,21
@keyline_offsets=0,1,1,1,20
#
# Perl 5.8.8 does not recognize  ҇ as a combining character...
#
	--/⋱≀	--∤/∣∁	--≈/∃∀	--⧣/∛∄	--/∜⨋	--◌/☆★	--/⨊	--§/⨄⨃		--⊠/∞⧆		--/--‛	--/◌⧇		∓―/±–/⁻₋	--//⁼⁺
	--   ⊤⊥/≠⟂/ꙩ/ꚑ ∫∮/∭∥/ꙫ/ꙭ ⊳⊲/⊢⊣/ꙮ □◇/△▽/ꚉ •⋈/⨯/ꙛ	∨∧	∪∩//ꙅ		≐×/≃/ԑ/--꙳	--∈//ꙉ	--∋//ꙃ/ꙁ	--//ҹ		--//ӌ
***	`~/ˋ˜	1!/¬¡/¼	2@/ºª/½	3#/√№/¾	4$/¢£/⅓	5%/€¥/⅔	6^/ˇˆ	7&/·©		8*/„‚		9(/“‘	0)/”’		-_/¯—//©	=+/µ±/↔⇔
	ю//ѫ/ѭ	1!/--∁	2@/∃∀	3ъ	4Ъ	5ё/--€	6Ё/-- ҃	7&/ ҆ ҇// ꙽ꙿ	8*//-- ҅	9(///ҁ	0)/// ꙼꙾	-_//ҿ/ҽ		ч//ҷ/ӵ
#
	--//θ	--//ω	--//ε	--//ρ		--//τ	--//ψ	--//υ	--//ι	--//ο	--//π	--//--₍/⁽	--//--₎/⁾	--/◊⧫
	--	--//ꚍ	--//ӗ	--//ҏ		--//ꚋ	--//ꙑ	--//ꙕ	--//ӊ	--	--//ꚏ	--//ꚅ		--//ꚗ	--//ӭ
***	q/ä	w/á	e/ê	r/å/®		t/þ/™	y/ÿ	u/ü/↖⇖	i/ĳ/↗⇗	o/œ	p/ø/℗	[{/«‹		]}/»›	\|/†¦
	я/ѣ/ѧ/ѩ	в/ѵ/ꙍ/ԝ	е/ё/ө/ӫ	р/ ҄®/ѽ/ԗ	т/ћ/ҭ/ԏ	ы/і/ү/ұ	у/ў/ӯ/ӱ	и/ѷ/ӣ/ӥ	о/ѡ/ѻ/ѿ	п/ѱ/ԥԤ/ҧ	ш//ԧԦ/ѐ	щ//ꚇ/ѝ	э//ѥ/ӧ
#
	--//α	--//σ	--//δ	--//φ	--//γ	--//η	--//ϊ	--//κ	--//λ	--		∂∇/′″/₌₊
	--//ԙ	--//ꚃ	--//ӡ	--	--//ӿ	--//ҩ	--///ꙇ	--//ӄ	--//ԉ	--//ԟ/ҝ		--//ꚓ/ꚕ
***	a/æ	s/ßẞ/℠	d/ð	f/è	g/ý	h/ú/←⇐	j/í/↓⇓	k/ó/↑⇑	l/ö/→⇒	;:/¨÷		'"/´ˮ
	а/ә/ꙗ/ӓ	с/ѕ/ҫ/ԍ	д/ђ/ӟ/ԁ	ф/ѳ/ғ/ӻ	г/ґ/ӷ/ҕ	х/һ/ҳ/ӽ	й/ї/ҋ/ӑ	к/қ/ҡ/ҟ	л/љ/ӆ/ԓ	;://ӹ/ӳ		'"/ ́´/ ̀ ̀/ ́ ́
#"
	--//ζ	--//χ	--//ξ	--//ϋ	--//β	--//ν	--//μ		--		…		⁄�/⋰
	--	--	--//ꙡ	--//ԃ	--	--//ӈ	--//ꙧ		--//ԇ/ԅ		--//ꙝ/ꙙ		…≟//ꙓ/ҍ
***	z/à	x/é	c/ç/©	v/ì	b/ù	n/ñ/↙⇙	m/ò/↘⇘		,</¸≤		.>/°≥		/?/0338¿
	з/є/ҙ/ѯ	ь/ъ/ӛ/ӕ	ц/џ/ҵ/ќ	ж/ӂ/җ/ӝ	б/ѓ/ѹ/ꙋ	н/њ/ң/ҥ	м/µ±/ӎ/ꙟ	,</«/⁘⁙/ԋ	.>/»/·։/჻⁖	/?/ј/ԛ/ꙏ
# ×∓  ⁻/− δ/∕ ν/ⁿ
	--	--
	--	--
***	\|/¶❧	./,
	\|/ӏӀ	./,
#
# Earlier versions had:	б/ѹ (now г overflows down as ...);	7&/ ҅ ҆	/?/§”	2@/²³
# ԥԤ  ԧԦ must be specified both lc/uc since perl 5.10 does not upcases them automatically (v6.0)
# On II-maps: forms with ¨, iotified, latinized forms, forms with more developped appendages, or appendages
# more to the right, or higher, are on AltGr prefix.  (Same for almost-unrelated letters placed
# opportunistically.  (Many are inverted w.r.t. Unicode versions!  Later reason in the list wins.)
#
# Ꚉ ԇ Ԛ Ԡ Ԕ Ԣ ԋ Ԧ - missing.   Stressed: ѐ ѝ (have them).
#
#Non-obvious: '"/́´/ӹ/ӳ	я/ѣ/ѧ/ѩ	б/ѓ/ѹ/ѽ	д/ђ/ӟ/ԁ  й/ї/ҋ/ӑ  ь/ъ/ӛ/ӕ   ф/ѳ/ғ/Ӻ   м/Ω±/ӎ/ꙟ   ш//ԧ/ѐ	щ//ꚇ/ѝ   з/є/ҙ/ѯ  ц/џ/ҵ/ќ
#		р/ ҄®/ꙋ	,</«„/⁘⁙	.>/»“/·։/჻⁖	/?/ј/;	+ 6789
# Coppa is on AltGr since 1/9 fraction pushes it there...
#
[layer_recipes]
#CopyRight_0=		Id(CopyRight)		MutateDupsOK[0327](SelectRX[[eE]](US-Base))	ByPairs[$¤ ,¸ qĸ ËƏ ëə "〃 -∓](US-Base)
#CopyRight_1=		Id(CopyRight-AltGr)	MutateDupsOK[00a8](SelectRX[[t]](US-Base))	ByPairs[EƏ eə](US-Base)
#
#Math_PlusPlus=	Id(Math)		ByPairs['′ "″]
#
# 0301 over Greek letters=tonos;   0308=dialytika	'
Greek_Hairy_0=	Id(Greek)	MutateDupsOK[<super>](SelectRX[[0-9]])	MutateDupsOK[<sub>](SelectRX[[0-9]](FlipShift))	ByPairs[/₯ ?; ;·](US-Base)
Greek_Hairy_1=	Id(Greek-AltGr)	MutateDupsOK[0301|<any-calculated-symbol>|<any-calculated-final>|<any-lunate-symbol>|<any-latinize>|<any-quasisynon>,<any-amplify>](Greek)	ByPairs[YϜ yϝ TϚ tϛ Kϗ XϠ xϡ CϘ cϙ ZϞ zϟ ;· R∐ l∧ L⋀ n∨ N⋁ F∅](US-Base)	ByPairs[1‐ 2– 3— 4― 0‒ |00ad !‑ -⁃ _‾](US-Base)	ShiftFromTo[5,˥](SelectRX[[5-9]](US-Base))	ShiftFromTo[5,꜒](SelectRX[[5-9]](FlipShift(US-Base))) ShiftFromTo[0,꜍](SelectRX[[0-4]](FlipShift(US-Base)))
#					This stores in unshifted positions of layer 0 (ρ takes YPOGEGRAMMENI 0345):
Greek_vowels_lc=	ByColumns[ρ,α,ω,ε,,,η,υ,ι,ο]
Greek_vowels=		Id(Greek_vowels_lc)		uc(FlipShift(Greek_vowels_lc))
Greek_vowels_AltGr=	MutateDupsOK[0345|0308](Layers(Empty+Greek_vowels))	ByPairs[.0020 l.0020 o.0020 9.0020](US-Base)
#
BusinessA_0=	Imported[business,00a4](US-Base)
BusinessA_1=	Imported[business,00a3](US-Base)
BusinessAdd_0=		ByPairs[qĸ Q⌨ '′ "″ ;‵ :‶ -∓ Oɶ [〈 ]〉 {◄ }► o℅](US-Base)	DefinedTo[¤](SelectRX[[^\da-zA-Z]](US-Base))
BusinessAdd_1=		ByPairs[EƏ eə OƎ oǝ '‴ "⁗ ;‷ :‱ Aᴁ WΩ 2ƻ f♀ m♂](US-Base)		DefinedTo[¤](SelectRX[[^\da-zA-Z]](US-Base))
#"
Business_0=	Id(BusinessA_0)	Face(VLine)		Id(BusinessAdd_0)
Business_1=	Id(BusinessA_1)	FlipLayers(VLine)	Id(BusinessAdd_1)
#
[face_recipes]
#					∦ obscures ⦀
VLine=		Mutate[\\∦[\],20d2,20d3,<any-addvline>,20e6,<any-vertical>,<any-stem>|<any-calculated-operator>,0338+<any-manual>,20d2+<any-manual>,20d3+<any-manual>|<any-addvline>+<any-addvline>,<any-addleft>+<any-addleft>,<any-addright>+<any-addright>](Face(Latin))
Business=	Layers(BusinessA_0+BusinessA_1)	Face(VLine)	Layers(BusinessAdd_0+BusinessAdd_1)
#
CyrillicBlue=		NotSameKey(Face(Latin)	Face(CyrillicPhonetic)	Layers(Blue+Blue-AltGr))	
CyrillicBlueMax=	ByPairs[ˮ〃](Face(Latin))	Face(CyrillicBlue)	Face(CyrillicPhonetic)
#
LatinBlue=		NotSameKey(Face(CyrillicPhonetic)	Face(Latin)	Layers(Blue+Blue-AltGr))	
LatinBlueMax=		ByPairs[ˮ〃](Face(CyrillicPhonetic))	Face(LatinBlue)	Face(Latin)
#
Greek_Vowels=	Layers(Greek_vowels+Greek_vowels_AltGr)
# PERISPOMENI=0342=circumflex=(visually)tilde	[SpaceOK not needed, since it checks the BASE character of a key] [varia does not decompose into SPACE+combining, but into `]
Greek_Vowels0=	ByRows[ MutateDupsOK[0342] /// MutateDupsOK[0301] ///  Id /// MutateDupsOK[0300] ](Face(Greek_Vowels))	ByPairs[`ρ ~Ρ](Face(Latin))	ByPairs[.`](Layers(Empty+US-Base))
# plain -> 0306 vrachy; -> 0304 macron	(in poetry: disambiguate short and long: http://www.tlg.uci.edu/~opoudjis/unicode/unicode_gkbkgd.html)
# They are used (almost always in teaching or dictionaries) to disambiguate the three vowels which might be long or short: alpha, iota, and upsilon. 
Greek_Vowels0_with_Vrachi=	ByRows[ Empty /// Empty ///  MutateDupsOK[0306] /// Empty ](Face(Greek_Vowels))
Greek_Vowels0_with_Macron=	ByRows[ Empty /// Empty ///  MutateDupsOK[0304] /// Empty ](Face(Greek_Vowels))
#
[faces]
# Create DeadKey maps basing on (massaged!) visual descriptions:
#				µ:
DeadKey_Map00b5=	Layers(Greek_Hairy_0+Greek_Hairy_1)	ByPairs[\0342 [0314 ]0313 `03e2](Face(Latin))	ByPairs[Vϔ](FlipLayers(Latin))
# koronis obscures 0313 psili; breve obscures 0342 perispomeni
DeadKey_Map0342=	ByPairs[lͺ Lι 0028῁ O΅ 3΄ #΅](FlipLayers(Latin))	ByPairs[3͵ #ʹ](Face(Latin))	Face(Greek_Vowels0_with_Vrachi)	FromTo[US-Base,Face(Greek_Vowels0_with_Macron)](ByPairs[sa SA hj HJ lk LK](US-Base))	Mutate[\\ϔ,<any-stroke-symbol>+<pseudo-calculated-symbol>|<pseudo-upgrade>](Face(Greek_Vowels0))	Face(Greek_Vowels0)
# some capital characters exist with aspiration, but not without; hence the play with uc (and uc may give something like ὮΙ) [varia needs to be special cased - it decomposes into `)
# We repeat the Shift-inverted ByPairs[#͵ 3ʹ](Face(Latin)) only to fight access from CyrillicPhonetic (remember ъЪёЁ)
DeadKey_Map0313=	ByPairs[L᾽](FlipLayers(Latin))	Mutate[\\᾽,0313](Face(Greek_Vowels0))	Mutate[ucfirst+0313](FlipShift(Face(Greek_Vowels0)))	ByPairs[.῍](Layers(Empty+US-Base))	ByPairs[#͵ 3ʹ](Face(Latin))
DeadKey_Map0314=	Mutate[0314](Face(Greek_Vowels0))	Mutate[ucfirst+0314](FlipShift(Face(Greek_Vowels0)))	ByPairs[.῝](Layers(Empty+US-Base))	ByPairs[#͵ 3ʹ](Face(Latin))
DeadKey_Map03e2=	Mutate[<any-greek2coptic>|<any-greek2coptic>+<any-archaic>](Layers(Greek_Hairy_0+Greek_Hairy_1))	Mutate[<any-latin2extracoptic>](ByPairs[jj JJ vf VF --](Face(Latin)) ByPairs[dt DT kx KX](FlipLayers(Latin)) FlipLayers(Latin))	ByPairs[BϷ bϸ IͰ iͱ jϳ GͶ gͷ MϺ mϻ Yϒ NͲ nͳ lϲ LϹ oͻ OϽ e϶ QϏ qϗ rͽ RϿ uͼ UϾ](FlipLayers(Latin))	MutateDupsOK[<sub>](SelectRX[[0-9]](Face(Latin)))	Mutate[<subst-Zuang_tones>](FlipLayers(Latin))
#
geometry_via_layer=US-Base
#
[faces/Latin]
@layers=US-Base,USLatin-AltGr
LinkFace=CyrillicPhonetic
#
MetaData_Index=0
faceDeadKeys= 	´  ˋ |||  ˜  ˆ |||  ° ¸ |||  ˇ  ¯  0338  ¨ ˮ µ  £
ExportDeadKeys=	´  ˋ  ˜  ˆ  ° ¸  ˇ  ¯  0338  ¨ ˮ
#
@faceDeadKeys2= 03a6.03a6,	00b5\,	00b5[,	00b5],	00b5`
#							002c = ,
@char2key_prefer_first=\,|,.,002c
#
# Will be only considered when putting a diacritic on AltGr-key (~∼, *∗, .⋅ ) perp=⟂' ¹⟂ is good only if ¹ is on 1! key…
@AltGrCharSubstitutions=|∣,²‖,ó∘,0338∕
# ¡≀ - better on bluekeys; #≠ - conflicts too much; ĳü - was good when ĳ was on k, not i
@AltGrCharSubstitutionLayers=Green,Green-AltGr
#
#  This gives more collisions:
#@AltGrCharSubstitutions=ĳü,^∧,&∩,*×,#≠,6∨,7∪,|∣,!⊥,1⊤,¡≀,¹⟂,2∫,@∮,ª∭,²‖,²∥,3⊳,#⊲,º△,³▽,4□,$◇,€⊢,¥⊣
#
# Tibetan range: take only tibetan diacritics, so our code adding diacritics won't be confused by prefices... ???
Auto_Diacritic_Start=0f00
Flip_AltGr_Key=00a0
@Import_Prefix_Keys=	0301:CyrillicPhonetic,03a6,	0483:CyrillicPhonetic,0483
#
DeadKey_InvMap0000=	ByPairs[0192.202f]
#                   Chaining makes sense if Flip_AltGr_Key is on AltGr key (repeating will reach inverted faces of:)
@chainAltGr=0192,03a6,0483
#
Diacritic_if_undef=			SpaceSelf2Id
DeadChar_DefaultTranslation=		♪
DeadChar_32bitTranslation=		♫
#
# 017F,0192,03a6 - good candidates to never be generated on the base face.  But 017F takes accents (use it for dead2 only)
# 00b6=pilcrow 007c=| 002f=/ 00a0=NBSPC --> open box, narrow and hair spaces to figure and narrow nbr-spaces (was: 03a6.2007 00a0.202F)
DeadKey_Map0192=	ByPairs[0020.2422 0192.2423 03a6.2420]	InheritPrefixKeys[Face(CyrillicPhonetic)](Face(CyrillicBlueMax))
# Layers(Russian+Russian-AltGr)
#							was: 0020.2009
DeadKey_AddMap03a6=	ByPairs[0020.00a0 0192.2007 03a6.0483]
#				Default map (not used now???):
DeadKey_Map=		Mutate	Mutate2Self
#
# diaeresis 00a8; 0309=hook above; ,<any-symbol-diaeresis> does not add anything...  pinyin caron=030c-diaeresis
DeadKey_Map00a8=	Mutate[00a8|0309+<subst-Vietnamese>,<reveal-greenkey>,030c+00a8--00a8|<any-diaeresized>|<any-calculated-operator>|<any-overlay>+<any-addvline>,<any-overlay>+<any-addhline>,<any-overlay>+<any-addline>,<any-amplify>+<any-round>,<any-round>+<any-round>,<any-rotunda>,<any-squirrel>|0309,<any-dot-above>+<any-dot-below>,<any-dot-above>+0301|<any-double-bar>,<pseudo-hook>,<pseudo-palatal-hook>|<pseudo-curl>]	Mutate2Self
# 2ee ˮ double apostrophe
DeadKey_Map02ee=	Mutate[00a8|0309+<subst-Vietnamese>|<any-double-grave>|<any-overlay>+<any-addvline>,<any-overlay>+<any-addhline>,<any-overlay>+<any-addline>,<any-amplify>+<any-round>,<any-round>+<any-round>,<any-rotunda>|<any-dot-above>,<any-adddottop>,<any-amplify>+<any-amplify>|<any-dot-above>+<any-calculated>,<any-dot-above>+0304--00a8|0304+<any-dot-below>]	MutateDupsOK[<any-latinize>](Greek)	MutateDupsOK[<any-latinize>](FromTo[US-Base,Greek](ByPairs[za ZA]))	Mutate2Self
#
#  Combine macron=00af and stroke (AOUaou missing stroke...)  00ad=SOFT HYPHEN; <any-stroke> should pick up 0338; 20D2 (|) and 20E5 \ do not appear in decompositions...
# ⩉ masks combining macron; 0311 is inverted breve; ⋺ gets in the way of overbar
DeadKey_Map00af=	ByPairs[”ɚ ¹ǃ]	Mutate[\\⩉∤≤≥,\\⋺[0],00af|0303+<subst-Macron>|<any-bar>,<any-horizontal-stroke>,<any-dash>,<any-overbar>,<any-topbar>,<any-strikethrough>,<any-over-equal>,<any-equal>,<any-line-!vertical>,<any-quill>,<any-base>,<any-underbar>,<any-phonetized>,<any-addhline>|<any-right-hook>|0311--0301,<any-paleocontraction>|0311,<any-horizontal>,0304+<any-dot-below>]	ByPairs[1‐ 2– 3—]	ByPairs[4― 0‒ ”ə ¦00ad !‑ ¹ǃ KȎ kȏ]	ShiftFromTo[5,˥](SelectRX[[5-9]])	Mutate2Self
# 0304+<any-dot-below> cannot be inverted - there is no intermediate point!
#
#  Combine breve=02d8/0306 and caron 02c7/030c (we do not description of breve-like diacretics!)
#   Note that Ü combines with caron (in 2 ways! Ǖ Ṻ) - but we prefer Ü -> Ǔ;	arc/check not visible; ƫꞇꞆ obscure ꝥ
DeadKey_Map02c7=	Mutate[\\ƫꞇꞆ,02c7|030c|<any-breve>,<any-arc>,<any-caron>,<any-loop>,<any-check>,<any-belt>,<any-flourish>,<any-tilde-below>--0300|<any-quasisynon>,<any-left-hook>|<any-palatal-hook>,<any-insular>,<any-epigraphic>,0306+0327--0301,<any-dot-above>+<any-caron>]	ByPairs[þꝥ ÞꝤ]	Mutate2Self
#
Named_DIA_Recipe__ring_dot_more=	0307,0323|0328+<subst-Macron>|<any-round>,<any-ring>,<any-dot>,<any-dots>,<any-dotless>,<any-other-circle>,<any-circled>,<any-circled>+<reveal-greenkey>,<any-adddot>|<any-insular>,<any-equal>+<any-amplify>
# ring above 00b0: combine with dotabove 307 dotbelow 323 
# (only WÊ miss dot below, AUY miss dot above: Ȧ is Livonian and phonetic; U is not precomposed; Ẉ - WHERE???) ; <any-jot> does not add anything useful now...
# Ẏ (useful WHERE???) obscures Vietnamese Ỵ, [any-dots does not add anything...]; ⋵ obscures ⦑
DeadKey_Map00b0=	Mutate[\\Ẏ⋵,00b0||0323+<subst-Vietnamese>|<NAMED-ring-dot-more>|<circle>] ByPairs[%‰]	Mutate2Self
#
# cedilla 0327(00b8) and ogonek 0328, comma below 0326 (precombined only on SsTt); [ᵅ obscures ⦷; let it...; Ꞃꞃ obscures ṛ]
DeadKey_Map00b8=	Mutate[\\Ẏ⋵Ꞃꞃ,0328,0327,0326|<any-comma>|<any-visigothic>|<any-greekize>,<any-doubleletter>|||00b0||0323+<subst-Vietnamese>|||<NAMED-ring-dot-more>]	Mutate2Self
#     <any-comma> picks up digits with comma which are above 0xffff - better make it last
#
Named_DIA_Recipe__acute_more=	<pseudo-hook>,<any-retroflex-hook>--0301,<any-hook>+<any-calculated>,<any-fishhook>+<any-calculated>,<any-hook>,<any-fishhook>,<pseudo-tail>,<any-leg>,<any-tail>,<pseudo-curl>,<any-apostrophe>,<any-tick>,<any-sharpen>,<any-addright>,<any-rightwards>|031b,<any-african>
# combine acute 00b4 and hooks/tails/curls and horn 031b	(double acute=030b/2dd - protect against '' --> "; Ǘ is accessible otherwise, hides Ủ)
DeadKey_Map00b4=	Mutate[\\˝,\\Ǘ[u],00b4|030b--00b4,00b4+031b--0300|<NAMED-acute-more>]	Mutate2Self
#
# Do not need 00b4+<subst-Vietnamese> ???
#
# double grave 30f, grave 60/2cb/300; append reversed list for acute (horn=031b)	
# (tnvz have 3 type of hooks attached; the middle one [palatal] on nz are not reached ƫᶇᶌᶎ)
# Ǜ would get in the way of Vietnamese Ư (it could be available elsewhere, but there it is also penalized...)
DeadKey_Map02cb=	Mutate[\\Ǜ[u],\\⧆,02cb|030f--0300,02cb+031b--0301,031b--00a8|<any-unsharpen>,<any-calculated-squared>,<any-addleft>,<any-leftwards>|||00b4|030b--00b4,00b4+031b--0300|<any-reversed>|||<NAMED-acute-more>]	Mutate2Self
#
# ; <any-overbar>--<any-manual-turnaround> to symmetrize ∈∋.
Named_DIA_Recipe__hat_more=	<pseudo-smallcaps>,<any-amplify>,<any-whiten>,<any-fake-white>,<any-fake-black>,<any-calculated-!operator-!squared-!circled-!african>,<any-loop>,<any-upturn>,<any-descender>,<any-underbar>,<any-overbar>--<any-manual-turnaround>,<any-paleo>,<any-fishhook>
# 0303 tilde
#	(For the purpose of double accents, grave 0300 is considered equivalent to horn 031b or hat 02c6, ring 00b0 to breve 02d8/0306, with-stroke to horn)
DeadKey_Map02dc=	Mutate[\\ı∼∽≈〚〛₡⍩⍚,02dc|02dc+<subst-Vietnamese>,<any-tilde>,<any-equivalent>,<any-addtilde>|||02c6|||<NAMED-hat-more>]	Mutate2Self
# adding <any-turnaround> breaks more than it adds.   \\∽[˜] does not work, since [**] acts BEFORE propagation to AltGr... ⍩ hurts ⩾
#
# Hat:  (if both smallcaps and turned/etc defined in the same Unicode version, prefer smallcaps) [loop/upturn not visible]
DeadKey_Map02c6=	Mutate[\\ı≈˜〚〛₡⍩⍚,02c6|<NAMED-hat-more>]	Mutate2Self
#
DeadKey_Map00a3=	Face(Business)
#
# division slash; <any-long-horizontal-stroke> just a micro-optimization; to access Ȧȧ
DeadKey_Map0338=	Mutate[<pseudo-stroke>,<any-stroke-!horizontal>,<any-long-horizontal-stroke>,<any-diagonal>,<any-solidus>,<any-addline>|<any-stroke>+<any-calculated>,<any-stroke>+<any-phonetized>,<any-umify>,<any-doubleletter>,00a8+00af--00a8,<any-dot-above>--0300]	ByPairs[!‼ 0020∕](Face(Latin))	SpaceSelf2Id
# Mutate2Self
+TableSummaryAddHTML=	The third Cyrillic map and 4 double-prefix-key Greek maps (3 polytonic, 1 Coptic+extra) are in the report for Cyrillic personality.  (Slightly mutiliated by ъЪёЁ-mirroring.)
#
[faces/VK]
#
@SPACE=,0020,0192@,03a6@,00a0@
#@TAB=,0009,0009,0483@,0484@
#
# Dotted circle, black circle, white circle
#@APPS=,-1,25CC@,25CF@,25EF@
#
# Non-breakable translations (non-ideal 2007), 202F
#
[faces/CyrillicPhonetic]
#
@layers=Russian-Base,Cyrillic-AltGr
#numLayers=2
BaseLayer=US-Base
LinkFace=Latin
#
MetaData_Index=1
#
faceDeadKeys= 	́	҃	µ  £
ExportDeadKeys=	́	҃
#
@faceDeadKeys2= 03a6.03a6,	00a0.Ё,	00b5.э,	00b5.ш,	00b5.щ,	00b5.ю
#		=> 0483	     	=> 0483
@LayoutTable_add_double_prefix_keys=	00b5.э,	00b5.ш,	00b5.щ,	00b5.ю
#
# Pressing AltGr-| produces |; with the setting below, pressing SWITCH AltGr-| produces the expected ¦
# Otherwise: the keys on OEM_102 (the SECOND \|) (which produce \| when both on Cyrillic and Latin) 
# would be prefered, and SWITCH AltGr-| would be resolved as "map | to Latin", and would produce |.
#						002c = ,
@char2key_prefer_first=\,|,.,002c
@char2key_prefer_last=Ё,Ъ,ё,ъ
#
# Tibetan range: take only tibetan diacritics, so our code adding diacritics won't be confused by prefices... ???
Auto_Diacritic_Start=0f00
Flip_AltGr_Key=00a0
#
# (Ё would be mapped to Е if we do not specify it explicitly:)
DeadKey_InvMap0000=	ByPairs[0192.202f Ё.0483]
#                   Chaining makes sense if Flip_AltGr_Key is on AltGr key (repeating will reach inverted faces of:)
@chainAltGr=0301,0483,0192
@Explicit_AltGr_Invert=0192,03a6
#
Diacritic_if_undef=			SpaceSelf2Id
DeadChar_DefaultTranslation=		♪
DeadChar_32bitTranslation=		♫
#
DeadKey_Map0192=	ByPairs[0020.2422 0192.2423 03a6.2420]		InheritPrefixKeys[Face(Latin)](Face(LatinBlueMax))
DeadKey_InvMap0192=	ByPairs[0020.00a0 0192.2007 03a6.0483]
#
DeadKey_Map0301_0=	Id(Cyrillic-II)		FromTo[Digits,Denominators1](LinkFace)	FromTo[Digits,Numerators1](FlipShift(US-Base))
# This ByPairs is tricky: we want to translate AltGr-Shift-Space; one might think one must use the mapping of non-AltGr layer???
DeadKey_Map0301_1=	Id(Cyrillic-II-AltGr)	FromTo[Digits,Denominators2](US-Base)	FromTo[Digits,Numerators2](FromToFlipShift[US-Base,US-Base](US-Base))	ByPairs[$⅘](US-Base)
#				0483 is ҃ titlo, A66F is combining vzmet, 2df5 is combining ST, 2df8 is combining DJERV (which we do not have non-combining???)
DeadKey_Map0483=	ByPairs[0020.2009 0192.2009 03a6.2009]	Mutate[<pseudo-calculated-combining>](Face(CyrillicPhonetic))	Mutate[<pseudo-calculated-combining>](FlipShift(Layers(Cyrillic-II+Cyrillic-II-AltGr)))	FromTo[Digits,CyrPowersOfTen](Face(Latin))	ByPairs[-A66F S.2df5 D.2df8 Nᵸ Lᴫ](Face(Latin))	Layers(Cyrillic-ExtraExtra+Cyrillic-Extra)
DeadKey_InvMap0483=	ByPairs[0192.2009]
#
DeadKey_Map00a3=	Face(Business)
#
+TableSummaryAddHTML=	The satellite maps for Latin (available here on double-prefix-keys) are in the report for Latin personality.  (In this personality, they are going to be slightly mutiliated by ъЪёЁ-mirroring.)
#
####[DEADKEYS/eurkey/1/1]
#####
####klc_filename=eurkey-std.klc
#####
#####    Now is not needed at all
#####
[visual -> DEADKEYS/la_ru]
#
# Can be omitted now:
#
KEYNAME_DEAD

02c6	"MODIFIER LETTER CIRCUMFLEX ACCENT"
00b4	"ACUTE ACCENT"
00b1	"PLUS-MINUS SIGN"
00a8	"DIAERESIS"
00a9	"COPYRIGHT SIGN"
00b0	"DEGREE SIGN"
02cb	"MODIFIER LETTER GRAVE ACCENT (Mandarin Chinese fourth tone)"
00af	"MACRON"
02dc	"SMALL TILDE"
02c7	"CARON (Mandarin Chinese third tone)"
03a9	"GREEK CAPITAL LETTER OMEGA"

[visual -> DEADKEYS/business]

DEADKEY	00A4

0041	20b3	// A -> ₳
0061	060b	// a -> ؋
0042	0e3f	// B -> ฿
0062	09f3	// b -> ৳
0043	00a2	// C -> ¢
// 0063	20a1	// c -> ₡
0063	00a9	// c -> ©
0044	20af	// D -> ₯
0064	20ab	// d -> ₫
0045	20a0	// E -> ₠
0065	20ac	// e -> €
0046	20a3	// F -> ₣
0066	0192	// f -> ƒ
0047	20b2	// G -> ₲
0067	0af1	// g -> ૱
0048	20b4	// H -> ₴
0068	20b4	// h -> ₴
0049	fdfc	// I -> ﷼
0069	17db	// i -> ៛
004b	20ad	// K -> ₭
006b	20ad	// k -> ₭
004c	00a3	// L -> £
006c	10da	// l -> ლ	GEORGIAN LETTER LAS [Georgian; Georgian; 1.1]
004d	2133	// M -> ℳ
006d	20a5	// m -> ₥
004e	20a6	// N -> ₦
006e	a838	// n -> ꠸	NORTH INDIC RUPEE MARK [5.2]
0050	20b1	// P -> ₱
0070	2117	// p -> ℗
0052	20b9	// R -> ₹
0072	00ae	// r -> ®
0053	20aa	// S -> ₪
0073	2120	// s -> ℠
0054	20b8	// T -> ₸
0074	2122	// t -> ™
// Put (CJK) yuans to AltGr-u/U	[Order on Wikipedia: yen (円/圓), yuan (元/圆)]
0055	5706	// U -> 圆	yuan-2
0075	5143	// u -> 元	yuan-1
0057	20a9	// W -> ₩
0077	20a9	// w -> ₩
0059	00a5	// Y -> ¥
0079	5143	// y -> 元
00a0	00a4	//   -> ¤
00a4	00a4	// ¤ -> ¤
//0024	00a4	// $ -> ¤
0020	00a4	//   -> ¤

DEADKEY	00A3

// 0043	20a2	// C -> ₢ (AltGr-inv)
0063	20b5	// c -> ₵ (AltGr-inv)
// ®™℗℠
0043	20a1	// C -> ₡
0042	09f2	// B -> ৲ (AltGr-inv)	BENGALI RUPEE MARK	Í
0062	20a2	// b -> ₢ (AltGr-inv)				í
0044	058F	// D -> ֏ (AltGr-inv) 	ARMENIAN DRAM SIGN	Ð
0064	058F	// d -> ֏ (AltGr-inv) 	ARMENIAN DRAM SIGN	ð
0047	09fB	// G -> ৾ (AltGr-inv)	BENGALI GANDA MARK	É
0067	09fB	// g -> ৾ (AltGr-inv)	BENGALI GANDA MARK	é
004c	20b6	// L -> ₶ (AltGr-inv) LIVRE TOURNOIS SIGN [5.2]	Ø
006c	20a4	// l -> ₤ (AltGr-inv)				ø
004e	a837	// N -> ꠷ (AltGr-inv) NORTH INDIC PLACEHOLDER MARK	Ñ
006e	a837	// n -> ꠷ (AltGr-inv) NORTH INDIC PLACEHOLDER MARK	ñ
0050	20a7	// P -> ₧ (AltGr-inv)	[obsolete Spanish]	œ
0070	20b0	// p -> ₰
0072	20a8	// r -> ₨
// 0052	20a2	// R -> ₢ (AltGr-inv)				ý
0052	211b	// R -> ℛ (AltGr-inv)	SCRIPT CAPITAL R	Ý
// 0053	0024	// S -> $ (AltGr-inv)				§
0053	0024	// S -> $ (AltGr-inv)				ß
0073	20b7	// s -> ₷	SPESMILO SIGN [5.2]
// 0054	0bf9	// T -> ௹ (AltGr-inv)				Þ
0074	20ae	// t -> ₮
0054	0bf9	// T -> ௹ (AltGr-inv)				þ
// Put CJK yens to AltGr-y/Y	[Order on Wikipedia: yen (円/圓), yuan (元/圆)]
0059	5713	// Y -> 圓 (AltGr-inv)	CJK yen-2		Ÿ
0079	5186	// y -> 円 (AltGr-inv)	CJK yen-1		ÿ

[visual -> KBD/Digits]
#
# For fractions, we look for fractions with minimal denominator/numerator which contain the given digit in numerator/denominator.  We take the first one and the second one from the list.
# Note that ⅗, ⅝, ⅞ do not appear in the lists via denominators; and ⅓, ¼, ⅕, ⅙, ⅛ do not appear in the lists via numerators.
# All Unicoded fractions appear in these lists.  So each one can be entered via a DeadKeyMap.
#
#
visual_rowcount=10
@visual_per_row_counts=1,1,2,1,1,1,1,1,1,1
visual_prefixes=<* *<> < +
in_key_separator=/
prefix_repeat=3
#
@layer_names=Numerators2,Numerators1,Digits,OverDigits,Denominators1,Denominators2,Super,SuperExtraLetters,Sub,SubExtraLetters,CyrPowersOfTen
# ↉ 0/3  ⅐ 1/7 ⅑ 1/9
<<<	½	⅖	⅗	--	⅝	--	--	--	--	--	--	--	--	--	--	--	--	--	--
***	⅟	⅔	¾	⅘	⅚	--	⅞	--	--	↉	--	--	--	--	--	--	--	--	--
	1/!	2/@	3/#	4/$	5/%	6/^	7/&	8/*	9/(	0/)	--	--	--	--	--	--	--	--	--
***	⅒	½	⅓	¼	⅕	⅙	⅐	⅛	⅑	⅒	--	--	--	--	--	--	--	--	--
<<<	--	--	⅔	¾	⅖	⅚	--	⅜	--	--	--	--	--	--	--	--	--	--	--
>>>	¹	²	³	⁴	⁵	⁶	⁷	⁸	⁹	⁰	ⁱ	⁲	⁳	⁺	⁻	⁼	⁽	⁾	ⁿ
	--	--	--	--	--	--	--	--	--	--	i	--	--	+	-	=	(	)	n
<<<	₁	₂	₃	₄	₅	₆	₇	₈	₉	₀	₊	₋	₌	₍	₎	₏	--	--	--
	--	--	--	--	--	--	--	--	--	--	+	-	=	(	)	ə	--	--	--
+++	--	--	҂	 ⃝	 ҈	 ҉	꙰	꙱	꙲	--	--	--	--	--	--	--	--	--	--
#
#
# Most of the above are very optional now: Super and Sup are obsoleted by Mutate[<super>] etc
# combined with Select[] clauses.  Register mapping is not done yet (2011) but can be easily done.
#
[Diacritics_Limits]
# For debugging purposes only, to check correct reading of tables below (0th entry is for 0..3 combined; 1 for 1..3, 2: 2,3; 4,5,6: combined)
@ALL=8,5,0,0,10,10,10,10
# 0:tilde, 1:grave,quote, 2: quote
[Diacritics]
# Surrogate + 8bit + Modifiers, Modifiers below, Vertical (or Comma-like or Doubled or Dotlike or Rotated or letter-like) Modifiers, Prime-like or Centered modifiers, Combining, Combining below, Vertical/plus-like/arrows and dotlike Combining, Combining for symbols
/APOSTROPHE=		'´ʼʾˀˊ΄/ˏˌ/ˈˌˡ/ʹˑ/ ́ ̉ ̛ ̷ ̸ ́ ͗  ᷎  ᷄  ᷇  ᷁/ ̗ ̩  ̦  ̹  ͅ / ̍ ̓  ̓ ̕ ̩  /  ⃬  ⃐ ⃫  ⃬
/QUOTATION_MARK=	"¨˝˸ː΅/˶˵/ˮ/ʺ/ ̈ ̋ ̏ ̈́  ᷉  ᷈  ゙    / ̤  ͈ / ̎  ͛   ͈ /  ⃛   ⃜  ⃨
/GRAVE_ACCENT=		`ˋʿˁˤ/ˎ/ʻʽ/˴˵/ ̀ ̀  ͑  ᷆  ᷅  ᷀ / ̖  ̜   ᷂ / ̒ ̔ /  ⃑ ⃭   ⃠ ⃥
/CIRCUMFLEX_ACCENT=	^ˆ˄˟/˰/˪˫ꜛʳʴʵʶˣ// ̂ ̑  ͒  ͡    ̽  ͆  ᷍ / ̭ ̯   ᷼     ͓  ̪  ̼  ͎  ᷊ /  ̘  ̙   ͉  ̘  ͉ /   ⃟  ⃤  ⃧ ⃩ ⃰  ⃟ 
/BREVE=			˘ˇ˅/ˬ˯˽˾/˱˲˿ˠʸꜜ/˂˃/ ̆ ̌ ̐ ͝   ᷓ  ᷾   ͐  ᷌  ᷋   ᷃/ ̮ ̬ ͜    ̺  ̫   ͔  ͕  ͖  ᷿  /  ͍   ͢  /   ⃞  ⃢  ⃣ 
/DEGREE_SIGN=		°˚˙/˳/˙ˠʰʱʲˢʷᵊᶣ/˓˒/ ̊ ゚     ᷒ / ̣ ̥ ̤  ̻   ͙   ͚ / ̇ ͘  ̣ ̤ ͘ /   ⃝ ⃘
/TILDE=			~ ˜/˷¸˛ͺ/ⸯꙿ/˞/ ̃ ̴ ͂ ͊ ͋ ͌   ͠  ᷑  / ̰  ̧  ̨  ̡  ̢  ᷏  ᷐  ᷽  ᷽ / ̾ ̾ /   ⃗  ⃖ ⃯ ⃮ ⃕ ⃔ ⃙ ⃚ ⃡
/MACRON=		¯ˉ˹˺/ˍ˻˼‗/˭/˔˕˖˗/ ̄ ̅ ̅ ̵ ̶ ̿ ͞   ̚  / ̱  ̲  ̳ ͇ ͟   ̠  /  ͍   ̝  ̞  ̟  ̠  ̘  ̙   ͉ /  ⃒ ⃓ ⃦  ⃪ ⃡  ⃡  ⃗  ⃖ ⃯ ⃮
#/SLASH=			∕///////
#
# These are from "main blocks" of the modifiers and combining; plus Greek standalone diacritics: ͺ΄΅
# One of ˠ is obscured by vertical line with middle dot...  The Macron-\ 29F7 obscures ˭.
# Circled \ and | with middle dot obscure ˙ˠ.  ˙ duplicated (forward) to make accessible.  Also:  ̅
#  ̾ ̘  ̙  ͘  ͉  ͉  ᷽  combining chars are also duplicated.  Also:  ⃡  ⃗  ⃖ ⃯ ⃮  ⃬  ⃟ (for symbols).
# ʰʱʲˡˢʷ - from IPA.  The rest (and ʳʴʵʶʸ) are v1.1 letter modifiers.  (ˠ is in front to unobscure the rest.)
#
# Combining for symbols: arrows and round arrows -> ~; rectangular around: to ˘ .
#`´¨˜ˆˇ°¯
